# bitrix.exam2
Готовый экзамен №2 (образ VMware, бэкап Битрикс, папка local)

Некоторые задания, которые не вошли в публичные материалы для подготовки:

### [ех2-43] Изменить «слоган» в шаблоне сайта

#### Общие требования

•	Задачу решить через свойство страницы и расширение возможностей типового компонента catalog.element. Компонент расположен по адресу /products/ в составе комплексного и отображает детальную страницу элемента. Комплексный компонент отображает данные из инфоблока Продукция.

•	Создание нового компонента или подмена стандартного через local будет неверным решением, компонент должен остаться типовой. Нужно воспользоваться расширением его возможностей с помощью специальных файлов шаблона.

•	Алгоритм решения, при котором будет использоваться некэшируемое обращение к базе данных - не будет верным.

#### Решаемая задача

•	Добавить свойство страницы сайта «Слоган в шапке сайта», с кодом «slogan_head»

•	Управление значением свойства должно быть доступно администратору сайта.

•	Текст слогана в шаблоне сайта, в файле header.php, устанавливается редактируемой областью. Редактируемую область заменить на вывод слогана с помощью созданного свойства страницы «Слоган в шапке сайта».

![Screenshot](0111111.png)

•	По умолчанию для всего сайта установить значение свойства: «Слоган компании находится в этом месте».

•	На детальной странице товара в каталоге (/products/N/M/ устанавливать слоган в шаблоне сайта равным первым 40 символам из описания товара для анонса.

![Screenshot](002.png)


### [ех2-75] Проверка текста при изменении новости

•	Реализовать проверку при изменении элемента информационного блока, в существующем информационном блоке Новости.

•	Если текст анонса содержит слово «калейдоскоп» то при изменении новости - заменять слово «калейдоскоп» на «[...]»

•	При замене слова - добавлять запись в журнал событий: «Замена слова калейдоскоп на [...], в новости с ID = {ID}». Где (ID) - это идентификатор новости, в которой было обработано изменение текста.


### [ех2-77] Разработать простой компонент «Каталог товаров»

#### Общие требования

•	У созданного компонента задать код: simplecomp.exam, название: «Мой компонент», раздел для отображения компонента в визуальном редакторе: «Экзамен №2».

•	Работу решения продемонстрировать в разделе сайта /ex2/simplecomp/ добавить пункт в главное меню «Экзамен2», и пункт в левом меню «Простой компонент».

#### Решаемая задача
•	Компонент должен выводить список товаров, сгруппированных по альтернативному классификатору. Альтернативный классификатор - разделы другого информационного блока.

•	Множественная привязка не будет использоваться.

•	Используется только один уровень разделов, вложенности - не будет.

•	Большой объем разделов и элементов не предполагается (не более 20 разделов и 100 элементов), лимиты на выборку и постраничная навигация - не нужны.

#### Технические требования

•	Использовать при решении метод GetMixedList - нельзя.

•	Компонент должен иметь только такие параметры:

    o	ID инфоблока с каталогом товаров, строка.

    o	ID инфоблока с альтернативным классификатором, строка.

    o	Код свойства, в котором хранится привязка к классификатору, строка.

    o	Типовые настройки кеширования: авто+упровляемое, кешировать, не кешировать, и время кеширования.

    o	Выбор шаблона.

•	Условия кеширования результата работы компонента - по умолчанию, не зависит от дополнительных данных.

#### Инфоблоки, получаемые данные

•	Использовать существующий инфоблок Продукция.

•	Создать инфоблок Альтернативный классификатор. В нем создать 2 раздела, назвать: Раздел 1, Раздел 2.

•	У разделов в инфоблоке Продукция создать пользовательское свойство Альтернативный классификатор, код UF_NEW_CLASSIFIER, тип - привязка к разделом.

•	Разделы инфоблока Продукция привязать к разделам альтернативного классификатора:

    o	«Детская мебель» и «Мебель для кухни» к «Раздел 1» 

    o	«Мягкая мебель» и «Офисная мебель» к «Раздел 2»

![Screenshot](003.png)

(для возможности отображения пользовательских полей в списке - настройте инфоблок на раздельный просмотр разделов и элементов)

•	Используемые в шаблоне данные разделов альтернативного классификатора:

    o	Поля: название
    
•	Используемые в шаблоне данные разделов каталога товаров:

    o	Поля: название.
    
•	Используемые в шаблоне данные элементов каталога:

    o	Поля: название.
    o	Свойства: цена, материал, артикул.
    
•	Сортировка при отборе не задается.

#### Установка заголовка страницы
•	В компоненте устанавливать заголовок страницы: «В каталоге товаров представлено разделов: [Количество]» где Количество - количество отображаемых разделов альтернативного классификатора.

•	Заголовок должен устанавливаться в файле componentphp. Этот функционал является логикой компонента и не должен «теряться» при смене шаблона.

#### Отображение данных

•	Строится дерево разделов альтернативного классификатора и элементов, относящихся к нему.

•	Рядом с названием альтернативного классификатора отображаются название связанных разделов каталога.

•	Рядом с товаром отображаются: цена, материал, артикул.

### [ех2-112] Ссылка на детальный просмотр товара.

#### Решаемая задача

•	Внести доработки в созданный ранее простой компонент.

•	Построить ссылки на детальный просмотр элементов из каталога товаров, отобразить ссылку в шаблоне компонента.

•	Детальный просмотр не нужно реализовывать, товар уже выводится в разделе /products/.../.../,, переход по полученный ссылке должен быть корректный, на товар в этом разделе.

•	Ссылка должна строиться не по шаблону созданному «в ручную», а на основании данных полученных элементов.

![Screenshot](005.png)


### [ех2-73] Создание комплексного компонента «Моя фотогалерея» 

#### Общие требования

•	Расширить возможности стандартного комплексного компонента Фотогалерея (photo), добавить в него новую страницу exampage.php и переменные.

•	Для новой страницы exampage.php реализовать поддержку как ЧПУ так и не ЧПУ режима.

•	Для решения предоставляются материалы - заготовка компонента, complexcomp.exam- materials. Это компонент photo, с добавленными заглушками в параметрах, созданной страницей exampage.php. Необходимо реализовать логику в файле components и вывод в шаблоне по заданию.

•	Работу решения продемонстрировать в разделе сайта /ex2/complexcomponent/, добавить пункт в главное меню «Экзомен2», и пункт в левом меню «Комплексный компонент».

#### Доработка компонента

•	Добавить переменные для построения адреса страницы: PARAM1, PARAM2.

•	Шаблон адреса по умолчанию для страницы exompoge.php при ЧПУ режиме: «123/456/edit/?PARAM2=789», где 123 это значение переменой SECTION_ID, 456 - ELEMENT_ID, edit - PARAM1, 789 - PARAM2

•	Условие, по которому открывается страница exampage.php без ЧПУ режима: заданы значения переменных SECTION_ID, ELEMENT_ID, PARAM1

•	В настройках компонента реализовать

    o	Для ЧПУ режима: управление шаблоном адреса страницы exampage.php 
    o	Для не ЧПУ режима: управление именами переменных.

Отображение данных

•	Компонент настроить на отображение инфоблока Продукция.

•	На странице компонента detail.php, перед подключением bitrix:photo.detail вывести ссылку на страницу exampage.php.

•	Для проверки решения в ссылку подставить значениями переменных. SECTION_ID, ELEMENT_ID- значения определенные комплексным компонентом, PARAM1 = edit, PARAM2 = 789.

•	Значения можно подставить с помощью str_replace.

•	На странице exampage.php вывести значение переменных SECTION_ID, ELEMENT_ID, PARAM1, PARАМ2

![Screenshot](006.png)

![Screenshot](007.png)

